{"version":3,"file":"static/js/697.9d483cea.chunk.js","mappings":"4JAIO,MCHP,GAAgB,QAAU,yBAAyB,cAAgB,+BAA+B,eAAiB,gCAAgC,sBAAwB,uCAAuC,YAAc,6BAA6B,aAAe,8BAA8B,iBAAmB,kCAAkC,kBAAoB,mCAAmC,oBAAsB,qCAAqC,OAAS,yB,sBCI1d,MAyEA,EAzEgBA,IAAmB,IAAlB,SAAEC,GAAUD,EAC3B,MAAM,MAAEE,EAAK,UAAEC,EAAS,OAAEC,GFFFC,MACxB,MAAOH,EAAOI,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAC7BN,GAAWW,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,KAAKb,YAC5CG,EAAQD,IAAaI,EAAAA,EAAAA,UAAS,IAE/BQ,GAAYC,EAAAA,EAAAA,cAChBC,UACER,GAAW,GACXE,EAAS,MACT,IACE,MAAMO,QAAaC,EAAAA,EAAAA,IAAalB,EAAUmB,GAC1Cd,EAASY,EACX,CAAE,MAAOG,GACPV,EAASU,EAAIC,SAAW,qJAC1B,CAAC,QACCb,GAAW,EACb,IAEF,CAACR,IAOH,OAJAsB,EAAAA,EAAAA,YAAU,KACRR,EAAUX,EAAO,GAChB,CAACA,EAAQW,IAEL,CAAEb,QAAOM,UAASE,QAAON,SAAQD,YAAW,EEzBdE,GAYrCmB,EAAAA,WAAgB,KACTpB,GACHD,EAAU,MACZ,GACC,CAACC,EAAQD,IAGZ,MAAMsB,EACJvB,QAA2BwB,IAAlBxB,EAAME,GACA,QAAXA,EACEF,EAAMyB,KAAO,GACbzB,EAAME,IAAW,GACnB,GAEN,OACEwB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOC,QAAQC,SAAA,EAE7BC,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAOI,YAAYF,SA3BvB,CACd,CAAEG,MAAO,MAAOC,MAAO,OACvB,CAAED,MAAO,UAAWC,MAAO,WAC3B,CAAED,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,YAAaC,MAAO,aAC7B,CAAED,MAAO,YAAaC,MAAO,aAC7B,CAAED,MAAO,WAAYC,MAAO,aAsBfC,KAAKC,IACZL,EAAAA,EAAAA,KAAA,UAEEJ,UACEzB,IAAWkC,EAAWF,MAClB,GAAGN,EAAOS,wBACV,GAAGT,EAAOU,iBAEhBC,QAASA,IAAMtC,EAAUmC,EAAWF,OAAOJ,SAC1CM,EAAWH,OAPPG,EAAWF,YAatBH,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAOY,cAAcV,SAClCP,EAAckB,OAAS,EACtBlB,EAAcY,KAAKO,IACjBhB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOe,aAAab,SAAA,EAClCC,EAAAA,EAAAA,KAACa,EAAAA,GAAI,CAACC,GAAI,SAASH,EAAKI,KAAKhB,UAC3BC,EAAAA,EAAAA,KAAA,OACEgB,IAAKL,EAAKM,UACVC,IAAK,GAAGP,EAAKQ,aACbvB,UAAWC,EAAOuB,sBAGtBzB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOwB,qBAAqBtB,SAAA,EAC1CC,EAAAA,EAAAA,KAACa,EAAAA,GAAI,CAACC,GAAI,SAASH,EAAKI,KAAKhB,UAC3BC,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAOyB,kBAAkBvB,SAAEY,EAAKQ,UAElDnB,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAO0B,oBAAoBxB,SAAEY,EAAKa,cAZZb,EAAKI,OAiBjDf,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAO4B,cAAc1B,SAAC,uBAGtC,C","sources":["hooks/useLibrary.js","webpack://wormates/./src/components/content/profile/tabs/Library/Library.module.scss?92c4","components/content/profile/tabs/Library/Library.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { fetchLibrary } from '../services/profile';\r\n\r\nexport const useLibrary = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const username = useSelector((state) => state.auth.username);\r\n  const [filter, setFilter] = useState(''); // Состояние для текущего фильтра\r\n\r\n  const loadBooks = useCallback(\r\n    async (currentFilter) => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const data = await fetchLibrary(username, currentFilter);\r\n        setBooks(data);\r\n      } catch (err) {\r\n        setError(err.message || 'Ошибка загрузки библиотеки');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [username], // Мемоизируем функцию на основе username\r\n  );\r\n\r\n  useEffect(() => {\r\n    loadBooks(filter); // Загружаем книги при изменении фильтра\r\n  }, [filter, loadBooks]); // Зависимости: filter и loadBooks\r\n\r\n  return { books, loading, error, filter, setFilter }; // Возвращаем filter\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"library\":\"Library_library__l2Zlv\",\"library_items\":\"Library_library_items__m3uOt\",\"library_button\":\"Library_library_button__0SzC6\",\"library_button_active\":\"Library_library_button_active__u67GX\",\"library_tab\":\"Library_library_tab__iAA+n\",\"library_item\":\"Library_library_item__sOIzU\",\"library_item_img\":\"Library_library_item_img__NDLkA\",\"library_item_name\":\"Library_library_item_name__dG5Sa\",\"library_item_author\":\"Library_library_item_author__EWAXk\",\"fadeIn\":\"Library_fadeIn__ERdwU\"};","import React from 'react';\r\nimport { useLibrary } from '../../../../../hooks/useLibrary';\r\nimport styles from './Library.module.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Library = ({ username }) => {\r\n  const { books, setFilter, filter } = useLibrary(username);\r\n\r\n  const filters = [\r\n    { label: 'All', value: 'all' },\r\n    { label: 'Reading', value: 'reading' },\r\n    { label: 'Liked', value: 'liked' },\r\n    { label: 'Wish List', value: 'wish_list' },\r\n    { label: 'Favorites', value: 'favorites' },\r\n    { label: 'Finished', value: 'finished' },\r\n  ];\r\n\r\n  // Устанавливаем \"all\" как значение фильтра по умолчанию\r\n  React.useEffect(() => {\r\n    if (!filter) {\r\n      setFilter('all');\r\n    }\r\n  }, [filter, setFilter]);\r\n\r\n  // Получение фильтрованных книг на основе текущего фильтра\r\n  const filteredBooks =\r\n    books && books[filter] !== undefined\r\n      ? filter === 'all'\r\n        ? books.all || []\r\n        : books[filter] || []\r\n      : [];\r\n\r\n  return (\r\n    <div className={styles.library}>\r\n      {/* Фильтры */}\r\n      <div className={styles.library_tab}>\r\n        {filters.map((filterItem) => (\r\n          <button\r\n            key={filterItem.value}\r\n            className={\r\n              filter === filterItem.value\r\n                ? `${styles.library_button_active}`\r\n                : `${styles.library_button}`\r\n            }\r\n            onClick={() => setFilter(filterItem.value)}>\r\n            {filterItem.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Список книг */}\r\n      <div className={styles.library_items}>\r\n        {filteredBooks.length > 0 ? (\r\n          filteredBooks.map((book) => (\r\n            <div className={styles.library_item} key={book.id}>\r\n              <Link to={`/book/${book.id}`}>\r\n                <img\r\n                  src={book.coverpage}\r\n                  alt={`${book.name} cover`}\r\n                  className={styles.library_item_img}\r\n                />\r\n              </Link>\r\n              <div className={styles.library_item_content}>\r\n                <Link to={`/book/${book.id}`}>\r\n                  <div className={styles.library_item_name}>{book.name}</div>\r\n                </Link>\r\n                <div className={styles.library_item_author}>{book.author}</div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className={styles.library_empty}>No books found</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Library;\r\n"],"names":["_ref","username","books","setFilter","filter","useLibrary","setBooks","useState","loading","setLoading","error","setError","useSelector","state","auth","loadBooks","useCallback","async","data","fetchLibrary","currentFilter","err","message","useEffect","React","filteredBooks","undefined","all","_jsxs","className","styles","library","children","_jsx","library_tab","label","value","map","filterItem","library_button_active","library_button","onClick","library_items","length","book","library_item","Link","to","id","src","coverpage","alt","name","library_item_img","library_item_content","library_item_name","library_item_author","author","library_empty"],"sourceRoot":""}